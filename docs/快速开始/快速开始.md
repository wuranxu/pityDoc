---
nav:
title: 一个最简单的例子
order: 2
---

## 快速开始

这节内容主要给大家讲述如何`快速`添加一个测试用例。

### 配置环境

我们测试的对象，肯定会部署在各个环节，最起码也会有`测试环境`和`开发环境`，所以我们先需要设置环境的名字。

进入`环境管理`页面, 比如添加`FAT`作为你的测试环境名称。

![](http://oss.pity.fun/picture/2022-2-27/1645897148453-image.png)


### 添加项目

首先，我们的`测试用例`是跟随项目来的，所以在添加用例的时候，我们得新建或者已有一个`项目`。

![](http://oss.pity.fun/picture/2022-2-26/1645886554011-image.png)

1. 点击`添加项目`按钮，输入`项目`的相关数据，服务名可以先不管，后续会有所变化，此处随便填写一个数据就可以了。

![](http://oss.pity.fun/picture/2022-2-26/1645887211496-image.png)

项目如果是私有，则除了`超级管理员`以外的其他成员无法访问你的`项目`。

2. 点击`确定`按钮完成项目的创建。

![](http://oss.pity.fun/picture/2022-2-26/1645887310033-image.png)

此时可以看到项目已经成功建立，我们先点击红框标记的卡片`进入项目`。

### 感受用例结构

我们进入`接口用例`菜单:

- 切换项目

  可以看到，我们的数据目前还是其他项目的数据，我们需要`新建`自己的数据。所以我们要切换到自己的项目:

![](http://oss.pity.fun/picture/2022-2-26/1645887574464-image.png)

接着选择我们刚才新建的`项目`:

![](http://oss.pity.fun/picture/2022-2-26/1645887610777-image.png)

可以看到提示，我们需要`新建`一个目录，去编写我们的case:

![](http://oss.pity.fun/picture/2022-2-26/1645887643788-image.png)

![](http://oss.pity.fun/picture/2022-2-26/1645887730145-image.png)

确定后，可以看到左侧会`多出`一个目录:

![](http://oss.pity.fun/picture/2022-2-26/1645887772656-image.png)

**对于子目录，我们可以在对应的目录上点击鼠标右键，新建子目录**

![](http://oss.pity.fun/picture/2022-2-26/1645887815585-image.png)

### 添加用例

#### 用例信息

有了`项目`和`目录`以后，我们就可以添加我们的`用例`了。选中目录以后，点击`添加用例`按钮:

![](http://oss.pity.fun/picture/2022-2-26/1645887949518-image.png)

可以看到进入了一个新的`页面`，一个输入用例数据的页面。这里是一个http请求的`雏形`，用例的信息需要大家自己输入，其中请求类型暂时只能选择`http`，其他的还未完善。

![](http://oss.pity.fun/picture/2022-2-26/1645888625097-image.png)

优先级与业界保持一致，`P0`是最高级别的。`用例标签`则用于后续给`用例分类`。

用例类型暂时有3种:

- 前置用例

  与普通用例基本一致，但一般作为普通用例的`前置条件`，解决数据依赖问题。举个例子，如果一个订单接口需要先把数据加入用户的购物车，那我们`添加商品到购物车`就可以作为一个前置用例，`主用例`则为`下单`用例。

- 普通用例

  即我们真切使用的测试用例。

- 数据工厂

  我们后续会提供`数据工厂`功能，当功能都完善以后，我们可以利用平台已有的特性，完成一些造数功能，比如此时我们需要制造一个`特殊订单`，而不是测试`订单的生成`功能。敬请期待~

#### 最简单的接口测试

当用例类型为`HTTP`（大部分情况）时，我们的`请求信息`窗口大致与`POSTMAN`保持一致，下面我们以测试`github star`数量为例子，完成我们的第一个接口测试case。

我们知道，github的star数量很容易获取（举这个例子是有求大家点star的意思=。=），而且接口的返回是JSON格式，我们先看看浏览器里面的内容，以`pity`为例:

![](http://oss.pity.fun/picture/2022-2-27/1645895632682-image.png)

那我们就测试最基础的点:

- 状态码是否为200
- name是否为pity
- star字段的值是否不等于0（因为会变化，我们又拿不到数据库/redis的具体数值去校验）

  那么在pity里面怎么写case呢?


![](http://oss.pity.fun/picture/2022-2-27/1645895839983-image.png)

1. 填好用例信息
2. 选择GET请求方式
3. 输入对应的请求地址
4. 点击`提交`按钮添加用例

当然，可以点击`Send`按钮`调试`一下接口。

这样我们的一个`初级版`的用例就编写完毕了。

![](http://oss.pity.fun/picture/2022-2-27/1645895944485-image.png)

提交后，可以发现用例的页面`产生了变化`，下方多了很多tab，我们来一一完善。

#### 添加断言

按照我们刚才说的，一个简单的case虽然只是请求，但也要有`断言`才行。我们切换到断言tab页面:

![](http://oss.pity.fun/picture/2022-2-27/1645896023618-image.png)

点击`添加断言`按钮:

![](http://oss.pity.fun/picture/2022-2-27/1645896078153-image.png)

我们输入以下内容，来校验http状态码是否为200.

**图中给出了智能提示，我们可以通过[el表达式](https://www.runoob.com/jsp/jsp-expression-language.html)来获取返回体的数据，从而进行断言。**

详情请参考: [pity的变量管理]()

这里的status_code则为固定的http状态码, 我们校验其是否等于200.

接着添加其他断言:

![](http://oss.pity.fun/picture/2022-2-27/1645897034080-image.png)

接着鼠标移到右上角，选择环境:

![](http://oss.pity.fun/picture/2022-2-27/1645897191997-image.png)

稍等片刻后，case就执行完成了。我们看看执行的数据:

![](http://oss.pity.fun/picture/2022-2-27/1645897209768-image.png)

其中日志可以查看详细的数据，我们来看看断言:

![](http://oss.pity.fun/picture/2022-2-27/1645897264510-image.png)

可以看到，3条断言数据都通过了，所以这条测试用例也`宣告执行成功`了。

下一节我们会讲解如何编写更为复杂的`测试用例`。
